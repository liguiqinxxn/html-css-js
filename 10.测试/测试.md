## 在你过往项目中有做过测试吗？请说说单测、集成测试、端到端测试的方案与实践

### 为什么需要测试？

1. 目的

   - 提高代码质量
   - 确保系统稳定性

2. 测试分类
   - 静态测试：代码审查，静态分析
   - 动态测试：单元测试，集成测试，端到端测试

### 测试方案的选择和设计

1. 单元测试
   - 验证单一功能模块，sayHello
   - 单测用例可以用来主导开发，测试驱动开发
2. 集成测试
   - 验证模块交互逻辑
   - 单测之后实施
3. 端到端测试
   - 验证最终用户体验
   - 最后阶段，优先测试一些**关键路径**
     1. 注册登录流程

### 测试金字塔模型

1. 金字塔模型
   - 底层：单元测试 （多且快）
   - 中间：集成测试 （适中）
   - 顶部：端到端测试（少但是全面）

### 单元测试，Unit Test

- 方法、组件作为测试单元
- 测试逻辑正确性，保证最终结果符合预期

- 工具框架 (时间由近到远)
  - Vitest
  - Jest
  - Mocha + Chai

```typescript
import { describe, it, expect } from "vitest";
describe("期望加法 2 + 1 = 3"),
  () => {
    it("测试加法函数", () => {
      const sum = (a, b) => a + b;
      expect(sum(1, 2)).toBe(3);
    });
  };
```

### 集成测试，Intergration Test
- 测试多模块之间的交互（登录）
- 涉及到数据库、API 外部依赖

- 工具框架
    - Supertest （Nestjs）
    - Cypress 
    - JUnit

```typescript
import request from "supertest";
import { app } from "./app";
describe("测试登录接口", () => {
  it("测试登录接口", async () => {
    const response = await request(app).post("/login").send({
      username: "admin",
      password: "password",
    });
    expect(response.status).toBe(200);
    expect(response.body.token).toBeTruthy();
  });
});
```

### 端到端测试，End-to-End Test e2e 
    - 站在用户的角度，测试关键流程，下单流程（直接购买 -》选择地址等信息 -》支付方式 -》完成支付 -》查看订单 -》查看物流
    - 模拟真实用户的操作

- 工具和框架
    - Playwright
    - Cypress
    - Selenium

```typescript
import { test, expect } from "@playwright/test";
test("测试登录功能", async ({ page }) => {
  await page.goto("https://example.com/login");
  await page.fill("input[name='username']", "admin");
  await page.fill("input[name='password']", "password");
  await page.click("button[type='submit']");
  await expect(page).toHaveURL("https://example.com/dashboard");
});


RPA (Robot Process Automation) 机器人流程自动化
- 自动化重复性任务
- 减少人为错误
- 提高效率
- 影刀
- Headless Browser


### 你了解过 Vitest 和 Playwright 吗？详细说说单测、端到端测试体系

#### Vitest 单元测试

技术点：
- Vitest
- @vitest/coverage
